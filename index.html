<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biz Empire Pro - Advanced Business Simulation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/monokai.min.css">
    <style>
        /* ====== CSS VARIABLES ====== */
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --success: #2ecc71;
            --warning: #f39c12;
            --info: #9b59b6;
            --light: #ecf0f1;
            --dark: #1a252f;
            --business-card: #34495e;
            --sidebar-width: 380px;
            --header-height: 90px;
            --transition-speed: 0.3s;
            --crypto-gold: #ffd700;
            --crypto-silver: #c0c0c0;
            --crypto-bitcoin: #f7931a;
            --crypto-ethereum: #627eea;
            --crypto-cardano: #0033ad;
        }
        
        /* ====== RESET & BASE STYLES ====== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(52, 152, 219, 0.1) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(46, 204, 113, 0.1) 0%, transparent 40%),
                radial-gradient(circle at 40% 80%, rgba(155, 89, 182, 0.1) 0%, transparent 40%);
            z-index: -1;
        }
        
        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* ====== CUSTOM SCROLLBAR ====== */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #3498db, #2ecc71);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #2980b9, #27ae60);
        }
        
        /* ====== HEADER STYLES ====== */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 30px;
            background: rgba(26, 37, 47, 0.95);
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }
        
        .header::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shimmer 3s infinite;
        }
        
        @keyframes shimmer {
            100% { left: 100%; }
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .logo-icon {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #3498db, #2ecc71);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .logo-text h1 {
            font-size: 2.8rem;
            background: linear-gradient(90deg, #3498db, #2ecc71, #9b59b6);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 900;
            letter-spacing: 1px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .logo-text p {
            color: #bdc3c7;
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        .currency-display {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: flex-end;
        }
        
        .currency-item {
            background: linear-gradient(135deg, rgba(44, 62, 80, 0.9), rgba(26, 37, 47, 0.9));
            padding: 12px 20px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            border: 2px solid transparent;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: all var(--transition-speed) ease;
            position: relative;
            overflow: hidden;
            min-width: 140px;
        }
        
        .currency-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%);
            transform: translateX(-100%);
        }
        
        .currency-item:hover::before {
            animation: slide 1s forwards;
        }
        
        @keyframes slide {
            100% { transform: translateX(100%); }
        }
        
        .currency-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        
        .currency-item.bizzy {
            border-color: #f39c12;
        }
        
        .currency-item.reputation {
            border-color: #9b59b6;
        }
        
        .currency-item.shares {
            border-color: #3498db;
        }
        
        .currency-item.bitcoin {
            border-color: var(--crypto-bitcoin);
        }
        
        .currency-item.ethereum {
            border-color: var(--crypto-ethereum);
        }
        
        .currency-item.cardano {
            border-color: var(--crypto-cardano);
        }
        
        .currency-item.gold {
            border-color: var(--crypto-gold);
        }
        
        .currency-icon {
            font-size: 1.5rem;
        }
        
        .currency-info h3 {
            font-size: 0.8rem;
            color: #bdc3c7;
            margin-bottom: 3px;
        }
        
        .currency-value {
            font-size: 1.3rem;
            font-weight: bold;
        }
        
        .bizzy-value {
            color: #f39c12;
        }
        
        .reputation-value {
            color: #9b59b6;
        }
        
        .shares-value {
            color: #3498db;
        }
        
        .bitcoin-value {
            color: var(--crypto-bitcoin);
        }
        
        .ethereum-value {
            color: var(--crypto-ethereum);
        }
        
        .cardano-value {
            color: var(--crypto-cardano);
        }
        
        .gold-value {
            color: var(--crypto-gold);
        }
        
        /* ====== GAME LAYOUT ====== */
        .game-layout {
            display: grid;
            grid-template-columns: 1fr var(--sidebar-width);
            gap: 30px;
            min-height: calc(100vh - 180px);
        }
        
        /* ====== MAIN CONTENT ====== */
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        
        /* ====== TABS SYSTEM ====== */
        .tabs {
            display: flex;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
            overflow-x: auto;
        }
        
        .tab-btn {
            padding: 12px 24px;
            background: none;
            border: none;
            color: #bdc3c7;
            cursor: pointer;
            font-size: 1rem;
            position: relative;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        
        .tab-btn::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 0;
            height: 2px;
            background: #3498db;
            transition: width 0.3s ease;
        }
        
        .tab-btn.active {
            color: #3498db;
        }
        
        .tab-btn.active::after {
            width: 100%;
        }
        
        .tab-btn:hover:not(.active) {
            color: #ecf0f1;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* ====== GAME PANELS ====== */
        .game-panel {
            background: rgba(26, 37, 47, 0.9);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            transition: all var(--transition-speed) ease;
        }
        
        .game-panel:hover {
            transform: translateY(-5px);
            box-shadow: 
                0 15px 35px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }
        
        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(52, 152, 219, 0.3);
        }
        
        .panel-title {
            font-size: 1.8rem;
            color: #3498db;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .panel-title i {
            font-size: 1.5rem;
        }
        
        .panel-actions {
            display: flex;
            gap: 10px;
        }
        
        .panel-btn {
            padding: 8px 16px;
            background: rgba(52, 152, 219, 0.2);
            border: 1px solid #3498db;
            color: #3498db;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }
        
        .panel-btn:hover {
            background: rgba(52, 152, 219, 0.3);
            transform: scale(1.05);
        }
        
        /* ====== MULTIPLAYER LEADERBOARDS ====== */
        .leaderboard-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .leaderboard-tab {
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: #bdc3c7;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .leaderboard-tab.active {
            background: rgba(52, 152, 219, 0.2);
            border-color: #3498db;
            color: #3498db;
        }
        
        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .leaderboard-table th {
            background: rgba(52, 152, 219, 0.2);
            padding: 15px;
            text-align: left;
            color: #3498db;
            border-bottom: 2px solid rgba(52, 152, 219, 0.3);
        }
        
        .leaderboard-table td {
            padding: 12px 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .leaderboard-table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .leaderboard-rank {
            width: 50px;
            text-align: center;
            font-weight: bold;
        }
        
        .rank-1 { color: #ffd700; }
        .rank-2 { color: #c0c0c0; }
        .rank-3 { color: #cd7f32; }
        
        .player-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3498db, #2ecc71);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }
        
        .player-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* ====== LEVELING SYSTEM ====== */
        .level-display {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            border-left: 4px solid #f39c12;
        }
        
        .level-icon {
            font-size: 3rem;
            color: #f39c12;
        }
        
        .level-info h3 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        
        .level-progress {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin: 15px 0;
        }
        
        .level-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #f39c12, #e67e22);
            border-radius: 10px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }
        
        .level-progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmerProgress 2s infinite;
        }
        
        .level-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .level-stat {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        
        .level-stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #2ecc71;
            margin-bottom: 5px;
        }
        
        .level-stat-label {
            color: #bdc3c7;
            font-size: 0.9rem;
        }
        
        /* ====== CRYPTO & CURRENCIES ====== */
        .crypto-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .crypto-card {
            background: linear-gradient(135deg, rgba(44, 62, 80, 0.9), rgba(26, 37, 47, 0.9));
            padding: 25px;
            border-radius: 15px;
            border: 2px solid transparent;
            transition: all var(--transition-speed) ease;
            position: relative;
            overflow: hidden;
        }
        
        .crypto-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(180deg, var(--crypto-bitcoin), var(--crypto-ethereum));
            transition: width var(--transition-speed) ease;
        }
        
        .crypto-card:hover::before {
            width: 100%;
            opacity: 0.1;
        }
        
        .crypto-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        .crypto-card.bitcoin {
            border-color: var(--crypto-bitcoin);
        }
        
        .crypto-card.ethereum {
            border-color: var(--crypto-ethereum);
        }
        
        .crypto-card.cardano {
            border-color: var(--crypto-cardano);
        }
        
        .crypto-card.gold {
            border-color: var(--crypto-gold);
        }
        
        .crypto-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .crypto-name-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .crypto-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }
        
        .crypto-icon.bitcoin {
            background: var(--crypto-bitcoin);
        }
        
        .crypto-icon.ethereum {
            background: var(--crypto-ethereum);
        }
        
        .crypto-icon.cardano {
            background: var(--crypto-cardano);
        }
        
        .crypto-icon.gold {
            background: var(--crypto-gold);
        }
        
        .crypto-price {
            font-size: 1.8rem;
            font-weight: bold;
        }
        
        .crypto-change {
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        .crypto-change.up {
            color: #2ecc71;
        }
        
        .crypto-change.down {
            color: #e74c3c;
        }
        
        .crypto-controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .crypto-qty {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
        }
        
        .crypto-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
        }
        
        .crypto-buy-btn {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: white;
        }
        
        .crypto-sell-btn {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }
        
        /* ====== GAMBLING ====== */
        .gambling-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }
        
        .gambling-card {
            background: linear-gradient(135deg, rgba(44, 62, 80, 0.9), rgba(26, 37, 47, 0.9));
            padding: 25px;
            border-radius: 15px;
            border: 2px solid transparent;
            transition: all var(--transition-speed) ease;
            text-align: center;
        }
        
        .gambling-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        .gambling-card.casino {
            border-color: #e74c3c;
        }
        
        .gambling-card.lottery {
            border-color: #9b59b6;
        }
        
        .gambling-card.stock-roulette {
            border-color: #3498db;
        }
        
        .gambling-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }
        
        .gambling-casino .gambling-icon {
            color: #e74c3c;
        }
        
        .gambling-lottery .gambling-icon {
            color: #9b59b6;
        }
        
        .gambling-stock-roulette .gambling-icon {
            color: #3498db;
        }
        
        .gambling-odds {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }
        
        .odds-item {
            text-align: center;
        }
        
        .odds-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #f39c12;
        }
        
        .odds-label {
            font-size: 0.8rem;
            color: #bdc3c7;
        }
        
        .bet-controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .bet-amount {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            font-size: 1.1rem;
        }
        
        .bet-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }
        
        .bet-btn.primary {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }
        
        .bet-btn.secondary {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            border: 2px solid #3498db;
        }
        
        /* ====== CUSTOMIZABLE BUSINESSES ====== */
        .business-customization {
            margin-top: 25px;
        }
        
        .business-types {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .business-type-card {
            background: linear-gradient(135deg, rgba(52, 73, 94, 0.8), rgba(44, 62, 80, 0.8));
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all var(--transition-speed) ease;
            border: 2px solid transparent;
        }
        
        .business-type-card:hover {
            transform: translateY(-5px);
            border-color: #3498db;
            box-shadow: 0 10px 25px rgba(52, 152, 219, 0.3);
        }
        
        .business-type-card.selected {
            border-color: #2ecc71;
            background: linear-gradient(135deg, rgba(46, 204, 113, 0.1), rgba(52, 152, 219, 0.1));
        }
        
        .business-type-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: #f39c12;
        }
        
        .business-customization-form {
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 15px;
            margin-top: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            color: #3498db;
            font-weight: 500;
        }
        
        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
        }
        
        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .color-picker {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .color-option {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s ease;
        }
        
        .color-option:hover {
            transform: scale(1.1);
        }
        
        .color-option.selected {
            border-color: white;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }
        
        .business-upgrade-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .upgrade-option {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .upgrade-option:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-3px);
        }
        
        .upgrade-option.selected {
            background: rgba(46, 204, 113, 0.2);
            border: 1px solid #2ecc71;
        }
        
        /* ====== STARTER JOBS ====== */
        .job-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .job-card {
            background: linear-gradient(135deg, #34495e, #2c3e50);
            padding: 25px;
            border-radius: 15px;
            cursor: pointer;
            transition: all var(--transition-speed) ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }
        
        .job-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(180deg, #3498db, #2ecc71);
            transition: width var(--transition-speed) ease;
        }
        
        .job-card:hover::before {
            width: 100%;
            opacity: 0.1;
        }
        
        .job-card:hover {
            transform: translateY(-5px);
            border-color: #3498db;
            box-shadow: 0 10px 25px rgba(52, 152, 219, 0.3);
        }
        
        .job-card.selected {
            border-color: #2ecc71;
            background: linear-gradient(135deg, rgba(46, 204, 113, 0.1), rgba(52, 152, 219, 0.1));
        }
        
        .job-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        
        .job-card-title {
            font-size: 1.3rem;
            color: #3498db;
            font-weight: 600;
        }
        
        .job-salary {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .job-description {
            color: #bdc3c7;
            margin-bottom: 15px;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .job-requirements {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
        }
        
        .requirement-tag {
            background: rgba(52, 152, 219, 0.2);
            color: #3498db;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            border: 1px solid rgba(52, 152, 219, 0.3);
        }
        
        .job-card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .job-difficulty {
            display: flex;
            gap: 3px;
        }
        
        .difficulty-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #34495e;
        }
        
        .difficulty-dot.active {
            background: #2ecc71;
        }
        
        .job-type {
            color: #f39c12;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        /* ====== SIDEBAR ====== */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        
        /* ====== RESPONSIVE DESIGN ====== */
        @media (max-width: 1400px) {
            .game-layout {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                display: grid;
            }
        }
        
        @media (max-width: 1024px) {
            .header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .currency-display {
                width: 100%;
                justify-content: center;
            }
            
            .job-grid, .crypto-grid, .gambling-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header {
                padding: 15px;
            }
            
            .logo-text h1 {
                font-size: 2rem;
            }
            
            .currency-display {
                flex-direction: column;
                gap: 10px;
            }
            
            .currency-item {
                width: 100%;
            }
            
            .game-panel {
                padding: 20px;
            }
            
            .modal-actions {
                flex-direction: column;
            }
            
            .tabs {
                flex-wrap: wrap;
            }
        }
        
        @media (max-width: 480px) {
            .job-grid, .crypto-grid, .gambling-grid {
                grid-template-columns: 1fr;
            }
            
            .panel-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .panel-actions {
                width: 100%;
                justify-content: center;
            }
        }
        
        /* ====== MODALS ====== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: linear-gradient(135deg, #1a252f, #2c3e50);
            padding: 40px;
            border-radius: 25px;
            max-width: 600px;
            width: 90%;
            box-shadow: 
                0 20px 50px rgba(0, 0, 0, 0.5),
                0 0 0 1px rgba(255, 255, 255, 0.1);
            border: 2px solid transparent;
            background-clip: padding-box;
            position: relative;
            animation: modalAppear 0.5s ease-out;
        }
        
        .modal-content::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg, #3498db, #2ecc71, #9b59b6);
            border-radius: 27px;
            z-index: -1;
            animation: rotate 10s linear infinite;
        }
        
        @keyframes modalAppear {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }
        
        .modal-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        .modal-btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .modal-btn.primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }
        
        .modal-btn.secondary {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            border: 2px solid #3498db;
        }
        
        .modal-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading" id="loading-screen">
        <div class="loading-spinner"></div>
        <div class="loading-text">Loading Biz Empire Pro...</div>
    </div>
    
    <!-- Main Container -->
    <div class="container" id="main-container" style="display: none;">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-chart-network"></i>
                </div>
                <div class="logo-text">
                    <h1>BIZ EMPIRE PRO</h1>
                    <p>Advanced Business Simulation Platform</p>
                </div>
            </div>
            
            <div class="currency-display">
                <div class="currency-item bizzy">
                    <div class="currency-icon">
                        <i class="fas fa-coins"></i>
                    </div>
                    <div class="currency-info">
                        <h3>BIZZY</h3>
                        <div class="currency-value bizzy-value" id="bizzy-amount">5,000</div>
                    </div>
                </div>
                
                <div class="currency-item bitcoin">
                    <div class="currency-icon">
                        <i class="fab fa-bitcoin"></i>
                    </div>
                    <div class="currency-info">
                        <h3>BITCOIN</h3>
                        <div class="currency-value bitcoin-value" id="bitcoin-amount">0.05</div>
                    </div>
                </div>
                
                <div class="currency-item ethereum">
                    <div class="currency-icon">
                        <i class="fab fa-ethereum"></i>
                    </div>
                    <div class="currency-info">
                        <h3>ETHEREUM</h3>
                        <div class="currency-value ethereum-value" id="ethereum-amount">0.8</div>
                    </div>
                </div>
                
                <div class="currency-item reputation">
                    <div class="currency-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="currency-info">
                        <h3>REPUTATION</h3>
                        <div class="currency-value reputation-value" id="reputation-amount">100</div>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- Game Layout -->
        <div class="game-layout">
            <!-- Main Content -->
            <div class="main-content">
                <!-- Tabs Navigation -->
                <div class="tabs" id="main-tabs">
                    <button class="tab-btn active" data-tab="jobs">
                        <i class="fas fa-briefcase"></i> Jobs
                    </button>
                    <button class="tab-btn" data-tab="businesses">
                        <i class="fas fa-building"></i> Businesses
                    </button>
                    <button class="tab-btn" data-tab="crypto">
                        <i class="fas fa-coins"></i> Crypto
                    </button>
                    <button class="tab-btn" data-tab="stocks">
                        <i class="fas fa-chart-line"></i> Stocks
                    </button>
                    <button class="tab-btn" data-tab="gambling">
                        <i class="fas fa-dice"></i> Gambling
                    </button>
                    <button class="tab-btn" data-tab="leaderboards">
                        <i class="fas fa-trophy"></i> Leaderboards
                    </button>
                    <button class="tab-btn" data-tab="leveling">
                        <i class="fas fa-level-up-alt"></i> Leveling
                    </button>
                </div>
                
                <!-- Jobs Tab -->
                <div class="tab-content active" id="jobs-tab">
                    <div class="game-panel">
                        <div class="panel-header">
                            <h2 class="panel-title">
                                <i class="fas fa-briefcase"></i>
                                Starter Jobs
                            </h2>
                            <div class="panel-actions">
                                <button class="panel-btn" onclick="showJobInfo()">
                                    <i class="fas fa-info-circle"></i> Info
                                </button>
                                <button class="panel-btn" onclick="sortJobs('salary')">
                                    <i class="fas fa-sort-amount-down"></i> Sort by Salary
                                </button>
                            </div>
                        </div>
                        
                        <div class="level-display">
                            <div class="level-icon">
                                <i class="fas fa-user-tie"></i>
                            </div>
                            <div class="level-info">
                                <h3>Career Level: <span id="career-level">1</span></h3>
                                <p>Gain experience to unlock better jobs</p>
                                <div class="level-progress">
                                    <div class="level-progress-fill" id="career-progress" style="width: 15%"></div>
                                </div>
                                <div class="level-stats">
                                    <div class="level-stat">
                                        <div class="level-stat-value" id="total-experience">150</div>
                                        <div class="level-stat-label">Total XP</div>
                                    </div>
                                    <div class="level-stat">
                                        <div class="level-stat-value" id="next-level-xp">1000</div>
                                        <div class="level-stat-label">XP to Next Level</div>
                                    </div>
                                    <div class="level-stat">
                                        <div class="level-stat-value" id="jobs-completed">3</div>
                                        <div class="level-stat-label">Jobs Completed</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="job-grid" id="job-cards-container">
                            <!-- Job cards will be dynamically generated -->
                        </div>
                        
                        <div class="submit-section" style="margin-top: 25px;">
                            <button class="submit-btn" id="apply-job-btn">
                                <i class="fas fa-file-signature"></i> Apply for Selected Job
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Businesses Tab -->
                <div class="tab-content" id="businesses-tab">
                    <div class="game-panel">
                        <div class="panel-header">
                            <h2 class="panel-title">
                                <i class="fas fa-building"></i>
                                Customizable Businesses
                            </h2>
                            <div class="panel-actions">
                                <button class="panel-btn" onclick="saveBusinessDesign()">
                                    <i class="fas fa-save"></i> Save Design
                                </button>
                                <button class="panel-btn" onclick="loadBusinessDesign()">
                                    <i class="fas fa-folder-open"></i> Load Design
                                </button>
                            </div>
                        </div>
                        
                        <div class="business-customization">
                            <h3 style="margin-bottom: 20px; color: #3498db;">Select Business Type</h3>
                            <div class="business-types" id="business-types-container">
                                <!-- Business type cards will be dynamically generated -->
                            </div>
                            
                            <div class="business-customization-form">
                                <h3 style="margin-bottom: 20px; color: #3498db;">Customize Your Business</h3>
                                
                                <div class="form-group">
                                    <label class="form-label">Business Name</label>
                                    <input type="text" class="form-input" id="business-name" placeholder="Enter your business name" value="My Awesome Business">
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Business Slogan</label>
                                    <input type="text" class="form-input" id="business-slogan" placeholder="Enter your business slogan" value="Quality and Innovation">
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Primary Color</label>
                                    <div class="color-picker" id="color-picker">
                                        <!-- Color options will be dynamically generated -->
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Business Upgrades</label>
                                    <div class="business-upgrade-options" id="upgrade-options">
                                        <!-- Upgrade options will be dynamically generated -->
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Business Description</label>
                                    <textarea class="form-textarea" id="business-description" placeholder="Describe your business...">A cutting-edge business focused on innovation and customer satisfaction.</textarea>
                                </div>
                                
                                <div class="submit-section" style="margin-top: 25px;">
                                    <button class="submit-btn" onclick="launchBusiness()">
                                        <i class="fas fa-rocket"></i> Launch Business ($10,000)
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Crypto Tab -->
                <div class="tab-content" id="crypto-tab">
                    <div class="game-panel">
                        <div class="panel-header">
                            <h2 class="panel-title">
                                <i class="fas fa-coins"></i>
                                Cryptocurrency Market
                            </h2>
                            <div class="panel-actions">
                                <button class="panel-btn" onclick="updateCryptoPrices()">
                                    <i class="fas fa-sync-alt"></i> Refresh
                                </button>
                                <button class="panel-btn" onclick="showCryptoAnalysis()">
                                    <i class="fas fa-chart-pie"></i> Analysis
                                </button>
                            </div>
                        </div>
                        
                        <div class="crypto-grid" id="crypto-container">
                            <!-- Crypto cards will be dynamically generated -->
                        </div>
                        
                        <div class="portfolio-summary" style="margin-top: 30px; padding: 20px; background: rgba(0,0,0,0.3); border-radius: 15px;">
                            <h3 style="margin-bottom: 15px; color: #3498db;">Crypto Portfolio</h3>
                            <div class="stats-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                <div class="stat-card">
                                    <div class="stat-title">Total Value</div>
                                    <div class="stat-value" id="crypto-portfolio-value">0 Bizzy</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-title">24h Change</div>
                                    <div class="stat-value up" id="crypto-24h-change">+0.00%</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-title">Total Coins</div>
                                    <div class="stat-value" id="total-crypto-coins">0</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-title">Profit/Loss</div>
                                    <div class="stat-value" id="crypto-profit-loss">0 Bizzy</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Gambling Tab -->
                <div class="tab-content" id="gambling-tab">
                    <div class="game-panel">
                        <div class="panel-header">
                            <h2 class="panel-title">
                                <i class="fas fa-dice"></i>
                                Casino & Gambling
                            </h2>
                            <div class="panel-actions">
                                <button class="panel-btn" onclick="showGamblingRules()">
                                    <i class="fas fa-info-circle"></i> Rules
                                </button>
                                <button class="panel-btn" onclick="resetBets()">
                                    <i class="fas fa-redo"></i> Reset
                                </button>
                            </div>
                        </div>
                        
                        <div class="gambling-grid" id="gambling-container">
                            <!-- Gambling cards will be dynamically generated -->
                        </div>
                        
                        <div class="warning-message" style="margin-top: 25px; padding: 15px; background: rgba(231, 76, 60, 0.2); border: 1px solid #e74c3c; border-radius: 10px; text-align: center;">
                            <i class="fas fa-exclamation-triangle" style="color: #e74c3c; margin-right: 10px;"></i>
                            <span>Gambling involves risk. Please play responsibly. Minimum age: 18+</span>
                        </div>
                    </div>
                </div>
                
                <!-- Leaderboards Tab -->
                <div class="tab-content" id="leaderboards-tab">
                    <div class="game-panel">
                        <div class="panel-header">
                            <h2 class="panel-title">
                                <i class="fas fa-trophy"></i>
                                Multiplayer Leaderboards
                            </h2>
                            <div class="panel-actions">
                                <button class="panel-btn" onclick="refreshLeaderboards()">
                                    <i class="fas fa-sync-alt"></i> Refresh
                                </button>
                                <button class="panel-btn" onclick="showMyRank()">
                                    <i class="fas fa-user"></i> My Rank
                                </button>
                            </div>
                        </div>
                        
                        <div class="leaderboard-tabs">
                            <button class="leaderboard-tab active" data-leaderboard="global">Global</button>
                            <button class="leaderboard-tab" data-leaderboard="friends">Friends</button>
                            <button class="leaderboard-tab" data-leaderboard="weekly">Weekly</button>
                            <button class="leaderboard-tab" data-leaderboard="crypto">Crypto Traders</button>
                            <button class="leaderboard-tab" data-leaderboard="business">Business Tycoons</button>
                        </div>
                        
                        <table class="leaderboard-table" id="leaderboard-table">
                            <thead>
                                <tr>
                                    <th class="leaderboard-rank">Rank</th>
                                    <th>Player</th>
                                    <th>Score</th>
                                    <th>Net Worth</th>
                                    <th>Level</th>
                                </tr>
                            </thead>
                            <tbody id="leaderboard-body">
                                <!-- Leaderboard rows will be dynamically generated -->
                            </tbody>
                        </table>
                        
                        <div class="my-rank" style="margin-top: 25px; padding: 20px; background: rgba(52, 152, 219, 0.2); border-radius: 15px;">
                            <h3 style="color: #3498db; margin-bottom: 10px;">Your Rank</h3>
                            <div style="display: flex; align-items: center; gap: 20px;">
                                <div class="player-avatar">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div style="flex: 1;">
                                    <div style="font-weight: bold; font-size: 1.2rem;" id="my-player-name">Player123</div>
                                    <div style="color: #bdc3c7; font-size: 0.9rem;" id="my-business-name">My Business Inc.</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-size: 2rem; font-weight: bold; color: #f39c12;" id="my-rank">#42</div>
                                    <div style="color: #bdc3c7; font-size: 0.8rem;">Global Rank</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-size: 1.5rem; font-weight: bold; color: #2ecc71;" id="my-score">125,430</div>
                                    <div style="color: #bdc3c7; font-size: 0.8rem;">Total Score</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Leveling Tab -->
                <div class="tab-content" id="leveling-tab">
                    <div class="game-panel">
                        <div class="panel-header">
                            <h2 class="panel-title">
                                <i class="fas fa-level-up-alt"></i>
                                Leveling System
                            </h2>
                            <div class="panel-actions">
                                <button class="panel-btn" onclick="showLevelRewards()">
                                    <i class="fas fa-gift"></i> Rewards
                                </button>
                                <button class="panel-btn" onclick="prestigeReset()">
                                    <i class="fas fa-redo"></i> Prestige
                                </button>
                            </div>
                        </div>
                        
                        <div class="level-display" style="margin-bottom: 30px;">
                            <div class="level-icon">
                                <i class="fas fa-crown"></i>
                            </div>
                            <div class="level-info">
                                <h3>Business Level: <span id="business-level-display">12</span> | Prestige: <span id="prestige-level">0</span></h3>
                                <p>Level up to unlock new features and bonuses</p>
                                <div class="level-progress">
                                    <div class="level-progress-fill" id="business-level-progress" style="width: 65%"></div>
                                </div>
                                <div class="level-stats">
                                    <div class="level-stat">
                                        <div class="level-stat-value" id="current-xp">6,500</div>
                                        <div class="level-stat-label">Current XP</div>
                                    </div>
                                    <div class="level-stat">
                                        <div class="level-stat-value" id="xp-needed">10,000</div>
                                        <div class="level-stat-label">XP to Next Level</div>
                                    </div>
                                    <div class="level-stat">
                                        <div class="level-stat-value" id="level-bonus">25%</div>
                                        <div class="level-stat-label">Earnings Bonus</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="skills-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; margin-top: 25px;">
                            <div class="skill-card" style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 15px; border-left: 4px solid #3498db;">
                                <h4 style="color: #3498db; margin-bottom: 15px;">Coding Skill</h4>
                                <div class="level-progress" style="height: 15px; margin-bottom: 10px;">
                                    <div class="level-progress-fill" style="width: 80%; background: linear-gradient(90deg, #3498db, #2980b9);"></div>
                                </div>
                                <div style="display: flex; justify-content: space-between; color: #bdc3c7; font-size: 0.9rem;">
                                    <span>Level 8</span>
                                    <span>+40% Code Accuracy</span>
                                </div>
                            </div>
                            
                            <div class="skill-card" style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 15px; border-left: 4px solid #2ecc71;">
                                <h4 style="color: #2ecc71; margin-bottom: 15px;">Business Skill</h4>
                                <div class="level-progress" style="height: 15px; margin-bottom: 10px;">
                                    <div class="level-progress-fill" style="width: 60%; background: linear-gradient(90deg, #2ecc71, #27ae60);"></div>
                                </div>
                                <div style="display: flex; justify-content: space-between; color: #bdc3c7; font-size: 0.9rem;">
                                    <span>Level 6</span>
                                    <span>+30% Earnings</span>
                                </div>
                            </div>
                            
                            <div class="skill-card" style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 15px; border-left: 4px solid #f39c12;">
                                <h4 style="color: #f39c12; margin-bottom: 15px;">Trading Skill</h4>
                                <div class="level-progress" style="height: 15px; margin-bottom: 10px;">
                                    <div class="level-progress-fill" style="width: 45%; background: linear-gradient(90deg, #f39c12, #e67e22);"></div>
                                </div>
                                <div style="display: flex; justify-content: space-between; color: #bdc3c7; font-size: 0.9rem;">
                                    <span>Level 5</span>
                                    <span>+25% Trading Profits</span>
                                </div>
                            </div>
                            
                            <div class="skill-card" style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 15px; border-left: 4px solid #9b59b6;">
                                <h4 style="color: #9b59b6; margin-bottom: 15px;">Crypto Skill</h4>
                                <div class="level-progress" style="height: 15px; margin-bottom: 10px;">
                                    <div class="level-progress-fill" style="width: 30%; background: linear-gradient(90deg, #9b59b6, #8e44ad);"></div>
                                </div>
                                <div style="display: flex; justify-content: space-between; color: #bdc3c7; font-size: 0.9rem;">
                                    <span>Level 3</span>
                                    <span>+15% Crypto Gains</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="level-rewards" style="margin-top: 30px;">
                            <h3 style="color: #3498db; margin-bottom: 20px;">Upcoming Level Rewards</h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px;">
                                <div class="reward-card" style="background: rgba(46, 204, 113, 0.1); padding: 15px; border-radius: 10px; border: 1px solid #2ecc71;">
                                    <div style="font-weight: bold; color: #2ecc71; margin-bottom: 5px;">Level 15</div>
                                    <div style="color: #bdc3c7; font-size: 0.9rem;">Unlock Advanced Stocks</div>
                                </div>
                                <div class="reward-card" style="background: rgba(52, 152, 219, 0.1); padding: 15px; border-radius: 10px; border: 1px solid #3498db;">
                                    <div style="font-weight: bold; color: #3498db; margin-bottom: 5px;">Level 20</div>
                                    <div style="color: #bdc3c7; font-size: 0.9rem;">Unlock Real Estate</div>
                                </div>
                                <div class="reward-card" style="background: rgba(155, 89, 182, 0.1); padding: 15px; border-radius: 10px; border: 1px solid #9b59b6;">
                                    <div style="font-weight: bold; color: #9b59b6; margin-bottom: 5px;">Level 25</div>
                                    <div style="color: #bdc3c7; font-size: 0.9rem;">Unlock IPO Feature</div>
                                </div>
                                <div class="reward-card" style="background: rgba(243, 156, 18, 0.1); padding: 15px; border-radius: 10px; border: 1px solid #f39c12;">
                                    <div style="font-weight: bold; color: #f39c12; margin-bottom: 5px;">Level 30</div>
                                    <div style="color: #bdc3c7; font-size: 0.9rem;">Unlock Global Expansion</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Player Stats -->
                <section class="game-panel player-stats">
                    <h2 class="panel-title">
                        <i class="fas fa-user-circle"></i>
                        Player Stats
                    </h2>
                    
                    <div class="stats-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 15px;">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-briefcase"></i>
                            </div>
                            <div class="stat-title">Job Title</div>
                            <div class="stat-value" id="player-job">Unemployed</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-title">Businesses</div>
                            <div class="stat-value" id="businesses-owned">0</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-code"></i>
                            </div>
                            <div class="stat-title">Coding Skill</div>
                            <div class="stat-value" id="coding-skill">Lv. 1</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                            <div class="stat-title">Net Worth</div>
                            <div class="stat-value" id="net-worth">5,000</div>
                        </div>
                    </div>
                    
                    <div class="timer" style="margin-top: 20px;">
                        <h3><i class="fas fa-clock"></i> Business Day</h3>
                        <div class="timer-display" id="time-remaining">08:00:00</div>
                        <p>Market opens in</p>
                        <div class="progress-bar">
                            <div class="progress-fill" id="day-progress" style="width: 15%"></div>
                        </div>
                    </div>
                </section>
                
                <!-- Crypto Portfolio -->
                <section class="game-panel portfolio-panel">
                    <h2 class="panel-title">
                        <i class="fas fa-wallet"></i>
                        Crypto Portfolio
                    </h2>
                    
                    <div class="portfolio-list" id="crypto-portfolio-list" style="max-height: 200px; overflow-y: auto; margin-top: 15px;">
                        <div class="portfolio-item">
                            <div class="portfolio-info">
                                <div class="portfolio-icon" style="background: var(--crypto-bitcoin);">
                                    <i class="fab fa-bitcoin"></i>
                                </div>
                                <div>
                                    <div>Bitcoin (BTC)</div>
                                    <small>0.05 BTC</small>
                                </div>
                            </div>
                            <div class="portfolio-value">$2,500</div>
                        </div>
                        <div class="portfolio-item">
                            <div class="portfolio-info">
                                <div class="portfolio-icon" style="background: var(--crypto-ethereum);">
                                    <i class="fab fa-ethereum"></i>
                                </div>
                                <div>
                                    <div>Ethereum (ETH)</div>
                                    <small>0.8 ETH</small>
                                </div>
                            </div>
                            <div class="portfolio-value">$1,200</div>
                        </div>
                    </div>
                    
                    <div class="portfolio-summary" style="margin-top: 15px;">
                        <div class="stat-item" style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span>Total Value:</span>
                            <span class="stat-value" id="total-crypto-value">3,700</span>
                        </div>
                        <div class="stat-item" style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span>24h Change:</span>
                            <span class="stat-value up" id="crypto-daily-change">+2.5%</span>
                        </div>
                    </div>
                </section>
                
                <!-- Quick Actions -->
                <section class="game-panel quick-actions">
                    <h2 class="panel-title">
                        <i class="fas fa-bolt"></i>
                        Quick Actions
                    </h2>
                    
                    <div class="actions-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 15px;">
                        <button class="action-btn" onclick="quickSave()" style="padding: 12px; background: rgba(52, 152, 219, 0.2); border: 1px solid #3498db; border-radius: 8px; color: #3498db; cursor: pointer; transition: all 0.2s ease;">
                            <i class="fas fa-save"></i>
                            <span>Quick Save</span>
                        </button>
                        <button class="action-btn" onclick="takeLoan()" style="padding: 12px; background: rgba(46, 204, 113, 0.2); border: 1px solid #2ecc71; border-radius: 8px; color: #2ecc71; cursor: pointer; transition: all 0.2s ease;">
                            <i class="fas fa-hand-holding-usd"></i>
                            <span>Take Loan</span>
                        </button>
                        <button class="action-btn" onclick="hireEmployee()" style="padding: 12px; background: rgba(155, 89, 182, 0.2); border: 1px solid #9b59b6; border-radius: 8px; color: #9b59b6; cursor: pointer; transition: all 0.2s ease;">
                            <i class="fas fa-user-plus"></i>
                            <span>Hire Staff</span>
                        </button>
                        <button class="action-btn" onclick="showUpgrades()" style="padding: 12px; background: rgba(243, 156, 18, 0.2); border: 1px solid #f39c12; border-radius: 8px; color: #f39c12; cursor: pointer; transition: all 0.2s ease;">
                            <i class="fas fa-rocket"></i>
                            <span>Upgrades</span>
                        </button>
                    </div>
                </section>
                
                <!-- Event Log -->
                <section class="game-panel event-log-panel">
                    <h2 class="panel-title">
                        <i class="fas fa-scroll"></i>
                        Event Log
                    </h2>
                    
                    <div class="event-log" id="event-log-list" style="max-height: 250px; overflow-y: auto; margin-top: 15px;">
                        <div class="event-item" style="padding: 10px; margin-bottom: 8px; background: rgba(0,0,0,0.3); border-radius: 8px; border-left: 4px solid #3498db;">
                            <div class="event-message">Welcome to Biz Empire Pro!</div>
                            <div class="event-time" style="color: #bdc3c7; font-size: 0.8rem;">Just now</div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chart.js/3.9.1/chart.min.js"></script>
    
    <!-- Main Game Script -->
    <script>
        // ====== GAME STATE & CONFIGURATION ======
        const GAME_CONFIG = {
            version: "3.0.0",
            dayDuration: 8 * 60 * 60, // 8 hours in seconds
            initialBizzy: 5000,
            initialReputation: 100,
            saveInterval: 30000,
            maxBusinesses: 5,
            maxEmployees: 10
        };

        const gameState = {
            // Core Stats
            bizzy: GAME_CONFIG.initialBizzy,
            reputation: GAME_CONFIG.initialReputation,
            day: 1,
            
            // Leveling System
            businessLevel: 1,
            careerLevel: 1,
            prestigeLevel: 0,
            experience: 0,
            experienceToNextLevel: 1000,
            
            // Skills
            codingSkill: 1,
            businessSkill: 1,
            tradingSkill: 1,
            cryptoSkill: 1,
            
            // Job & Work
            job: null,
            businesses: [],
            employees: [],
            totalEarnings: 0,
            
            // Crypto Portfolio
            crypto: {
                bitcoin: 0.05,
                ethereum: 0.8,
                cardano: 0,
                gold: 0
            },
            
            cryptoValues: {
                bitcoin: 50000,
                ethereum: 1500,
                cardano: 0.5,
                gold: 1800
            },
            
            // Gambling Stats
            gamblingWins: 0,
            gamblingLosses: 0,
            totalWagered: 0,
            
            // Multiplayer
            playerName: "Player" + Math.floor(Math.random() * 1000),
            leaderboardRank: 0,
            leaderboardScore: 0,
            
            // Game State
            currentTab: "jobs",
            selectedJobId: null,
            selectedBusinessType: null,
            eventLog: [],
            
            // Settings
            autoSave: true,
            soundEnabled: true,
            notificationsEnabled: true
        };

        // ====== DATA STRUCTURES ======
        const JOBS = [
            {
                id: 1,
                title: "Junior Web Developer",
                salary: 1000,
                dailySalary: 500,
                description: "Build responsive websites for small businesses",
                requirements: ["HTML5", "CSS3", "JavaScript"],
                difficulty: 1,
                type: "tech",
                icon: "fa-code",
                unlocked: true,
                xpReward: 100
            },
            {
                id: 2,
                title: "Freelance Designer",
                salary: 1200,
                dailySalary: 600,
                description: "Create logos and brand identities for startups",
                requirements: ["Photoshop", "Illustrator", "Creativity"],
                difficulty: 1,
                type: "design",
                icon: "fa-palette",
                unlocked: true,
                xpReward: 120
            },
            {
                id: 3,
                title: "Social Media Manager",
                salary: 800,
                dailySalary: 400,
                description: "Manage social accounts and create engaging content",
                requirements: ["Social Media", "Content Creation", "Marketing"],
                difficulty: 1,
                type: "marketing",
                icon: "fa-hashtag",
                unlocked: true,
                xpReward: 80
            },
            {
                id: 4,
                title: "Data Entry Specialist",
                salary: 600,
                dailySalary: 300,
                description: "Organize and input data for various companies",
                requirements: ["Excel", "Attention to Detail", "Typing"],
                difficulty: 1,
                type: "admin",
                icon: "fa-keyboard",
                unlocked: true,
                xpReward: 60
            },
            {
                id: 5,
                title: "Customer Support",
                salary: 700,
                dailySalary: 350,
                description: "Help customers with product issues and questions",
                requirements: ["Communication", "Patience", "Problem Solving"],
                difficulty: 1,
                type: "support",
                icon: "fa-headset",
                unlocked: true,
                xpReward: 70
            },
            {
                id: 6,
                title: "Delivery Driver",
                salary: 900,
                dailySalary: 450,
                description: "Deliver packages and food orders to customers",
                requirements: ["Driving", "Navigation", "Time Management"],
                difficulty: 1,
                type: "delivery",
                icon: "fa-truck",
                unlocked: true,
                xpReward: 90
            },
            {
                id: 7,
                title: "Tutor",
                salary: 850,
                dailySalary: 425,
                description: "Teach students various subjects online",
                requirements: ["Teaching", "Subject Knowledge", "Communication"],
                difficulty: 1,
                type: "education",
                icon: "fa-graduation-cap",
                unlocked: true,
                xpReward: 85
            },
            {
                id: 8,
                title: "Virtual Assistant",
                salary: 950,
                dailySalary: 475,
                description: "Provide administrative support remotely",
                requirements: ["Organization", "Communication", "Multi-tasking"],
                difficulty: 1,
                type: "admin",
                icon: "fa-calendar-alt",
                unlocked: true,
                xpReward: 95
            }
        ];

        const BUSINESS_TYPES = [
            {
                id: 1,
                name: "Tech Startup",
                description: "Develop innovative software solutions",
                icon: "fa-laptop-code",
                color: "#3498db",
                initialCost: 10000,
                dailyRevenue: 1000,
                risk: "medium",
                unlocksAtLevel: 3
            },
            {
                id: 2,
                name: "E-commerce Store",
                description: "Sell products online with global reach",
                icon: "fa-shopping-cart",
                color: "#2ecc71",
                initialCost: 8000,
                dailyRevenue: 800,
                risk: "low",
                unlocksAtLevel: 2
            },
            {
                id: 3,
                name: "Crypto Exchange",
                description: "Trade cryptocurrencies and earn fees",
                icon: "fa-coins",
                color: "#f39c12",
                initialCost: 15000,
                dailyRevenue: 1500,
                risk: "high",
                unlocksAtLevel: 5
            },
            {
                id: 4,
                name: "Marketing Agency",
                description: "Help businesses grow through marketing",
                icon: "fa-bullhorn",
                color: "#9b59b6",
                initialCost: 12000,
                dailyRevenue: 1200,
                risk: "medium",
                unlocksAtLevel: 4
            },
            {
                id: 5,
                name: "Restaurant Chain",
                description: "Serve food across multiple locations",
                icon: "fa-utensils",
                color: "#e74c3c",
                initialCost: 20000,
                dailyRevenue: 2000,
                risk: "medium",
                unlocksAtLevel: 6
            },
            {
                id: 6,
                name: "Real Estate",
                description: "Buy, sell, and rent properties",
                icon: "fa-building",
                color: "#34495e",
                initialCost: 50000,
                dailyRevenue: 5000,
                risk: "high",
                unlocksAtLevel: 10
            }
        ];

        const CRYPTOCURRENCIES = [
            {
                id: 1,
                name: "Bitcoin",
                symbol: "BTC",
                icon: "fa-bitcoin",
                color: "var(--crypto-bitcoin)",
                basePrice: 50000,
                volatility: 0.05,
                description: "The original cryptocurrency"
            },
            {
                id: 2,
                name: "Ethereum",
                symbol: "ETH",
                icon: "fa-ethereum",
                color: "var(--crypto-ethereum)",
                basePrice: 1500,
                volatility: 0.07,
                description: "Smart contract platform"
            },
            {
                id: 3,
                name: "Cardano",
                symbol: "ADA",
                icon: "fa-coins",
                color: "var(--crypto-cardano)",
                basePrice: 0.5,
                volatility: 0.1,
                description: "Proof-of-stake blockchain"
            },
            {
                id: 4,
                name: "Gold Token",
                symbol: "GOLD",
                icon: "fa-gem",
                color: "var(--crypto-gold)",
                basePrice: 1800,
                volatility: 0.02,
                description: "Digital gold-backed token"
            }
        ];

        const GAMBLING_GAMES = [
            {
                id: 1,
                name: "Casino Slots",
                description: "Spin to win big jackpots!",
                icon: "fa-slot-machine",
                type: "casino",
                minBet: 100,
                maxBet: 10000,
                odds: "1:1000",
                payout: "Up to 1000x"
            },
            {
                id: 2,
                name: "Daily Lottery",
                description: "Buy tickets for daily drawings",
                icon: "fa-ticket-alt",
                type: "lottery",
                minBet: 50,
                maxBet: 1000,
                odds: "1:10000",
                payout: "Jackpot: 1,000,000 Bizzy"
            },
            {
                id: 3,
                name: "Stock Roulette",
                description: "Bet on stock price movements",
                icon: "fa-chart-line",
                type: "stock-roulette",
                minBet: 500,
                maxBet: 50000,
                odds: "1:3",
                payout: "2x - 10x"
            },
            {
                id: 4,
                name: "Crypto Dice",
                description: "Roll dice for crypto prizes",
                icon: "fa-dice",
                type: "crypto-dice",
                minBet: 200,
                maxBet: 20000,
                odds: "1:6",
                payout: "Crypto coins"
            }
        ];

        const LEADERBOARD_DATA = {
            global: [],
            friends: [],
            weekly: [],
            crypto: [],
            business: []
        };

        // ====== INITIALIZATION ======
        function initializeGame() {
            // Set up event listeners
            setupEventListeners();
            
            // Generate initial content
            generateJobCards();
            generateBusinessTypes();
            generateCryptoCards();
            generateGamblingCards();
            generateLeaderboards();
            
            // Load saved game if exists
            loadGame();
            
            // Update UI
            updateUI();
            
            // Start game timer
            startGameTimer();
            
            // Simulate initial leaderboard data
            simulateLeaderboardData();
            
            // Hide loading screen
            setTimeout(() => {
                document.getElementById('loading-screen').style.display = 'none';
                document.getElementById('main-container').style.display = 'block';
                addEvent("Welcome to Biz Empire Pro! Start by applying for a job.", "info");
            }, 2000);
        }

        // ====== TAB SYSTEM ======
        function setupEventListeners() {
            // Tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const tabId = btn.getAttribute('data-tab');
                    switchTab(tabId);
                });
            });
            
            // Leaderboard tabs
            document.querySelectorAll('.leaderboard-tab').forEach(btn => {
                btn.addEventListener('click', () => {
                    const leaderboardId = btn.getAttribute('data-leaderboard');
                    switchLeaderboard(leaderboardId);
                });
            });
            
            // Apply job button
            document.getElementById('apply-job-btn').addEventListener('click', applyForJob);
            
            // Business type selection
            document.getElementById('business-types-container').addEventListener('click', (e) => {
                const card = e.target.closest('.business-type-card');
                if (card) {
                    selectBusinessType(card.dataset.typeId);
                }
            });
        }

        function switchTab(tabId) {
            // Update active tab button
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.toggle('active', btn.getAttribute('data-tab') === tabId);
            });
            
            // Update active tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.toggle('active', content.id === `${tabId}-tab`);
            });
            
            gameState.currentTab = tabId;
            addEvent(`Switched to ${tabId} tab`, "info");
        }

        function switchLeaderboard(leaderboardId) {
            // Update active leaderboard tab
            document.querySelectorAll('.leaderboard-tab').forEach(btn => {
                btn.classList.toggle('active', btn.getAttribute('data-leaderboard') === leaderboardId);
            });
            
            // Update leaderboard table
            updateLeaderboardTable(leaderboardId);
        }

        // ====== JOB SYSTEM ======
        function generateJobCards() {
            const container = document.getElementById('job-cards-container');
            container.innerHTML = '';
            
            JOBS.forEach(job => {
                const card = document.createElement('div');
                card.className = `job-card ${gameState.selectedJobId == job.id ? 'selected' : ''}`;
                card.dataset.jobId = job.id;
                card.innerHTML = `
                    <div class="job-card-header">
                        <div class="job-card-title">${job.title}</div>
                        <div class="job-salary">${formatNumber(job.salary)} Bizzy</div>
                    </div>
                    <p class="job-description">${job.description}</p>
                    <div class="job-requirements">
                        ${job.requirements.map(req => `<span class="requirement-tag">${req}</span>`).join('')}
                    </div>
                    <div class="job-card-footer">
                        <div class="job-difficulty">
                            ${Array.from({length: 5}, (_, i) => 
                                `<div class="difficulty-dot ${i < job.difficulty ? 'active' : ''}"></div>`
                            ).join('')}
                        </div>
                        <div class="job-type">${job.type.toUpperCase()}</div>
                    </div>
                `;
                
                card.addEventListener('click', () => selectJob(job.id));
                container.appendChild(card);
            });
        }

        function selectJob(jobId) {
            gameState.selectedJobId = jobId;
            generateJobCards();
        }

        function applyForJob() {
            if (!gameState.selectedJobId) {
                alert("Please select a job first!");
                return;
            }
            
            const job = JOBS.find(j => j.id == gameState.selectedJobId);
            if (!job) return;
            
            // Apply for job
            gameState.job = job;
            gameState.bizzy += job.salary;
            gameState.experience += job.xpReward;
            gameState.totalEarnings += job.salary;
            
            // Update career level
            checkLevelUp();
            
            // Add event
            addEvent(`Hired as ${job.title}! Received ${formatNumber(job.salary)} Bizzy signing bonus.`, "success");
            
            // Update UI
            updateUI();
            
            // Show success message
            alert(`Congratulations! You're now a ${job.title}. You'll earn ${formatNumber(job.dailySalary)} Bizzy per day.`);
        }

        // ====== BUSINESS CUSTOMIZATION ======
        function generateBusinessTypes() {
            const container = document.getElementById('business-types-container');
            container.innerHTML = '';
            
            BUSINESS_TYPES.forEach(business => {
                const card = document.createElement('div');
                card.className = `business-type-card ${gameState.selectedBusinessType == business.id ? 'selected' : ''}`;
                card.dataset.typeId = business.id;
                card.innerHTML = `
                    <div class="business-type-icon">
                        <i class="fas ${business.icon}"></i>
                    </div>
                    <h4>${business.name}</h4>
                    <p style="color: #bdc3c7; font-size: 0.9rem; margin: 10px 0;">${business.description}</p>
                    <div style="display: flex; justify-content: space-between; margin-top: 15px;">
                        <span style="color: #f39c12;">$${formatNumber(business.initialCost)}</span>
                        <span style="color: #2ecc71;">+$${formatNumber(business.dailyRevenue)}/day</span>
                    </div>
                `;
                
                container.appendChild(card);
            });
            
            // Generate color picker
            generateColorPicker();
            
            // Generate upgrade options
            generateUpgradeOptions();
        }

        function selectBusinessType(typeId) {
            gameState.selectedBusinessType = typeId;
            generateBusinessTypes();
        }

        function generateColorPicker() {
            const colors = ['#3498db', '#2ecc71', '#e74c3c', '#f39c12', '#9b59b6', '#1abc9c', '#34495e'];
            const container = document.getElementById('color-picker');
            container.innerHTML = '';
            
            colors.forEach(color => {
                const option = document.createElement('div');
                option.className = 'color-option';
                option.style.backgroundColor = color;
                option.addEventListener('click', () => {
                    document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('selected'));
                    option.classList.add('selected');
                });
                
                if (color === '#3498db') option.classList.add('selected');
                container.appendChild(option);
            });
        }

        function generateUpgradeOptions() {
            const upgrades = [
                { id: 1, name: "Premium Location", cost: 5000, description: "+20% daily revenue" },
                { id: 2, name: "Advanced Equipment", cost: 3000, description: "+15% efficiency" },
                { id: 3, name: "Marketing Campaign", cost: 2000, description: "+25% customer reach" },
                { id: 4, name: "Staff Training", cost: 1500, description: "+10% productivity" },
                { id: 5, name: "Tech Upgrade", cost: 4000, description: "+30% automation" }
            ];
            
            const container = document.getElementById('upgrade-options');
            container.innerHTML = '';
            
            upgrades.forEach(upgrade => {
                const option = document.createElement('div');
                option.className = 'upgrade-option';
                option.innerHTML = `
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span style="font-weight: bold;">${upgrade.name}</span>
                        <span style="color: #f39c12;">$${formatNumber(upgrade.cost)}</span>
                    </div>
                    <div style="color: #bdc3c7; font-size: 0.9rem;">${upgrade.description}</div>
                `;
                
                option.addEventListener('click', () => {
                    option.classList.toggle('selected');
                });
                
                container.appendChild(option);
            });
        }

        function launchBusiness() {
            if (!gameState.selectedBusinessType) {
                alert("Please select a business type!");
                return;
            }
            
            const businessType = BUSINESS_TYPES.find(b => b.id == gameState.selectedBusinessType);
            if (!businessType) return;
            
            if (gameState.bizzy < businessType.initialCost) {
                alert(`You need ${formatNumber(businessType.initialCost)} Bizzy to launch this business!`);
                return;
            }
            
            // Check if business is unlocked
            if (businessType.unlocksAtLevel > gameState.businessLevel) {
                alert(`This business requires Business Level ${businessType.unlocksAtLevel}!`);
                return;
            }
            
            // Create business
            const business = {
                id: Date.now(),
                typeId: businessType.id,
                name: document.getElementById('business-name').value,
                slogan: document.getElementById('business-slogan').value,
                color: document.querySelector('.color-option.selected').style.backgroundColor,
                description: document.getElementById('business-description').value,
                dailyRevenue: businessType.dailyRevenue,
                level: 1,
                employees: 0,
                launchedDate: new Date().toLocaleDateString()
            };
            
            // Add selected upgrades
            const selectedUpgrades = Array.from(document.querySelectorAll('.upgrade-option.selected'));
            selectedUpgrades.forEach(upgrade => {
                // Apply upgrade effects here
            });
            
            // Deduct cost
            gameState.bizzy -= businessType.initialCost;
            gameState.businesses.push(business);
            
            // Add experience
            gameState.experience += 500;
            
            // Add event
            addEvent(`Launched ${business.name}! Daily revenue: $${formatNumber(business.dailyRevenue)}`, "success");
            
            // Update UI
            updateUI();
            checkLevelUp();
            
            alert(`Congratulations! ${business.name} is now open for business!`);
        }

        function saveBusinessDesign() {
            const design = {
                name: document.getElementById('business-name').value,
                slogan: document.getElementById('business-slogan').value,
                description: document.getElementById('business-description').value,
                selectedType: gameState.selectedBusinessType
            };
            
            localStorage.setItem('businessDesign', JSON.stringify(design));
            addEvent("Business design saved!", "success");
        }

        function loadBusinessDesign() {
            const design = JSON.parse(localStorage.getItem('businessDesign'));
            if (design) {
                document.getElementById('business-name').value = design.name;
                document.getElementById('business-slogan').value = design.slogan;
                document.getElementById('business-description').value = design.description;
                if (design.selectedType) {
                    selectBusinessType(design.selectedType);
                }
                addEvent("Business design loaded!", "info");
            }
        }

        // ====== CRYPTO SYSTEM ======
        function generateCryptoCards() {
            const container = document.getElementById('crypto-container');
            container.innerHTML = '';
            
            CRYPTOCURRENCIES.forEach(crypto => {
                const price = gameState.cryptoValues[crypto.name.toLowerCase()] || crypto.basePrice;
                const change = (Math.random() - 0.5) * 10; // Random change between -5% and +5%
                const changePercent = change.toFixed(2);
                const newPrice = price * (1 + change / 100);
                
                const card = document.createElement('div');
                card.className = `crypto-card ${crypto.name.toLowerCase()}`;
                card.innerHTML = `
                    <div class="crypto-header">
                        <div class="crypto-name-section">
                            <div class="crypto-icon ${crypto.name.toLowerCase()}">
                                <i class="fab ${crypto.icon}"></i>
                            </div>
                            <div>
                                <div style="font-weight: bold; font-size: 1.2rem;">${crypto.name}</div>
                                <div style="color: #bdc3c7; font-size: 0.9rem;">${crypto.symbol}</div>
                            </div>
                        </div>
                        <div>
                            <div class="crypto-price">$${formatNumber(newPrice)}</div>
                            <div class="crypto-change ${change >= 0 ? 'up' : 'down'}">
                                ${change >= 0 ? '+' : ''}${changePercent}%
                            </div>
                        </div>
                    </div>
                    <p style="color: #bdc3c7; margin: 15px 0; font-size: 0.9rem;">${crypto.description}</p>
                    <div style="margin: 15px 0;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                            <span style="color: #bdc3c7;">You own:</span>
                            <span style="font-weight: bold;">${gameState.crypto[crypto.name.toLowerCase()] || 0} ${crypto.symbol}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: #bdc3c7;">Value:</span>
                            <span style="font-weight: bold; color: #2ecc71;">
                                $${formatNumber((gameState.crypto[crypto.name.toLowerCase()] || 0) * newPrice)}
                            </span>
                        </div>
                    </div>
                    <div class="crypto-controls">
                        <input type="number" class="crypto-qty" id="qty-${crypto.symbol}" 
                               min="0.001" step="0.001" value="0.1" placeholder="Amount">
                        <button class="crypto-btn crypto-buy-btn" onclick="buyCrypto('${crypto.symbol}')">
                            Buy
                        </button>
                        <button class="crypto-btn crypto-sell-btn" onclick="sellCrypto('${crypto.symbol}')">
                            Sell
                        </button>
                    </div>
                `;
                
                container.appendChild(card);
            });
            
            updateCryptoPortfolio();
        }

        function buyCrypto(symbol) {
            const crypto = CRYPTOCURRENCIES.find(c => c.symbol === symbol);
            if (!crypto) return;
            
            const qtyInput = document.getElementById(`qty-${symbol}`);
            const qty = parseFloat(qtyInput.value) || 0.1;
            const price = gameState.cryptoValues[crypto.name.toLowerCase()] || crypto.basePrice;
            const cost = qty * price;
            
            if (cost > gameState.bizzy) {
                alert(`Not enough Bizzy! You need $${formatNumber(cost)}.`);
                return;
            }
            
            // Buy crypto
            gameState.bizzy -= cost;
            gameState.crypto[crypto.name.toLowerCase()] = (gameState.crypto[crypto.name.toLowerCase()] || 0) + qty;
            
            // Add experience
            gameState.experience += Math.round(cost / 10);
            
            // Add event
            addEvent(`Bought ${qty} ${symbol} for $${formatNumber(cost)}`, "success");
            
            // Update UI
            updateUI();
            generateCryptoCards();
        }

        function sellCrypto(symbol) {
            const crypto = CRYPTOCURRENCIES.find(c => c.symbol === symbol);
            if (!crypto) return;
            
            const qtyInput = document.getElementById(`qty-${symbol}`);
            const qty = parseFloat(qtyInput.value) || 0.1;
            const owned = gameState.crypto[crypto.name.toLowerCase()] || 0;
            
            if (qty > owned) {
                alert(`You only own ${owned} ${symbol}!`);
                return;
            }
            
            const price = gameState.cryptoValues[crypto.name.toLowerCase()] || crypto.basePrice;
            const earnings = qty * price;
            
            // Sell crypto
            gameState.bizzy += earnings;
            gameState.crypto[crypto.name.toLowerCase()] = owned - qty;
            
            // Add experience
            gameState.experience += Math.round(earnings / 10);
            
            // Add event
            addEvent(`Sold ${qty} ${symbol} for $${formatNumber(earnings)}`, "success");
            
            // Update UI
            updateUI();
            generateCryptoCards();
        }

        function updateCryptoPrices() {
            CRYPTOCURRENCIES.forEach(crypto => {
                const currentPrice = gameState.cryptoValues[crypto.name.toLowerCase()] || crypto.basePrice;
                const change = (Math.random() - 0.5) * crypto.volatility * 100;
                const newPrice = currentPrice * (1 + change / 100);
                gameState.cryptoValues[crypto.name.toLowerCase()] = newPrice;
            });
            
            generateCryptoCards();
            addEvent("Crypto prices updated!", "info");
        }

        function updateCryptoPortfolio() {
            let totalValue = 0;
            let totalChange = 0;
            
            CRYPTOCURRENCIES.forEach(crypto => {
                const owned = gameState.crypto[crypto.name.toLowerCase()] || 0;
                const price = gameState.cryptoValues[crypto.name.toLowerCase()] || crypto.basePrice;
                totalValue += owned * price;
            });
            
            // Update display
            document.getElementById('crypto-portfolio-value').textContent = `$${formatNumber(totalValue)}`;
            document.getElementById('total-crypto-value').textContent = formatNumber(totalValue);
            
            // Calculate 24h change (simulated)
            const change = (Math.random() - 0.5) * 5;
            document.getElementById('crypto-24h-change').textContent = `${change >= 0 ? '+' : ''}${change.toFixed(2)}%`;
            document.getElementById('crypto-24h-change').className = `stat-value ${change >= 0 ? 'up' : 'down'}`;
            document.getElementById('crypto-daily-change').textContent = `${change >= 0 ? '+' : ''}${change.toFixed(2)}%`;
        }

        // ====== GAMBLING SYSTEM ======
        function generateGamblingCards() {
            const container = document.getElementById('gambling-container');
            container.innerHTML = '';
            
            GAMBLING_GAMES.forEach(game => {
                const card = document.createElement('div');
                card.className = `gambling-card gambling-${game.type}`;
                card.innerHTML = `
                    <div class="gambling-icon">
                        <i class="fas ${game.icon}"></i>
                    </div>
                    <h3>${game.name}</h3>
                    <p style="color: #bdc3c7; margin: 15px 0;">${game.description}</p>
                    
                    <div class="gambling-odds">
                        <div class="odds-item">
                            <div class="odds-value">${game.odds}</div>
                            <div class="odds-label">Odds</div>
                        </div>
                        <div class="odds-item">
                            <div class="odds-value">${game.payout}</div>
                            <div class="odds-label">Payout</div>
                        </div>
                    </div>
                    
                    <div class="bet-controls">
                        <input type="number" class="bet-amount" id="bet-${game.id}" 
                               min="${game.minBet}" max="${game.maxBet}" value="${game.minBet}" 
                               placeholder="Bet amount">
                        <button class="bet-btn primary" onclick="placeBet(${game.id})">
                            Place Bet
                        </button>
                    </div>
                    
                    <div style="margin-top: 15px; color: #bdc3c7; font-size: 0.8rem;">
                        Min: $${formatNumber(game.minBet)} | Max: $${formatNumber(game.maxBet)}
                    </div>
                `;
                
                container.appendChild(card);
            });
        }

        function placeBet(gameId) {
            const game = GAMBLING_GAMES.find(g => g.id === gameId);
            if (!game) return;
            
            const betInput = document.getElementById(`bet-${gameId}`);
            const betAmount = parseInt(betInput.value) || game.minBet;
            
            if (betAmount < game.minBet || betAmount > game.maxBet) {
                alert(`Bet amount must be between $${formatNumber(game.minBet)} and $${formatNumber(game.maxBet)}!`);
                return;
            }
            
            if (betAmount > gameState.bizzy) {
                alert(`Not enough Bizzy! You have $${formatNumber(gameState.bizzy)}.`);
                return;
            }
            
            // Deduct bet amount
            gameState.bizzy -= betAmount;
            gameState.totalWagered += betAmount;
            
            // Determine win/loss based on game type
            let win = false;
            let multiplier = 1;
            let winnings = 0;
            
            switch(game.type) {
                case 'casino':
                    // 5% chance to win
                    win = Math.random() < 0.05;
                    multiplier = win ? Math.floor(Math.random() * 10) + 1 : 0;
                    break;
                case 'lottery':
                    // 0.01% chance to win
                    win = Math.random() < 0.0001;
                    multiplier = win ? 1000 : 0;
                    break;
                case 'stock-roulette':
                    // 33% chance to win
                    win = Math.random() < 0.33;
                    multiplier = win ? Math.floor(Math.random() * 9) + 2 : 0;
                    break;
                case 'crypto-dice':
                    // 16.67% chance to win (1 in 6)
                    win = Math.random() < 0.1667;
                    multiplier = win ? 6 : 0;
                    break;
            }
            
            winnings = betAmount * multiplier;
            
            if (win) {
                gameState.bizzy += winnings;
                gameState.gamblingWins++;
                addEvent(`Won $${formatNumber(winnings)} at ${game.name}!`, "success");
                
                if (multiplier >= 10) {
                    // Big win!
                    addEvent(`JACKPOT! Won ${multiplier}x your bet!`, "success");
                }
            } else {
                gameState.gamblingLosses++;
                addEvent(`Lost $${formatNumber(betAmount)} at ${game.name}.`, "error");
            }
            
            // Update UI
            updateUI();
            
            // Show result
            alert(win ? 
                `You won $${formatNumber(winnings)} (${multiplier}x)!` : 
                `You lost $${formatNumber(betAmount)}. Better luck next time!`
            );
        }

        function resetBets() {
            GAMBLING_GAMES.forEach(game => {
                const input = document.getElementById(`bet-${game.id}`);
                if (input) input.value = game.minBet;
            });
        }

        // ====== LEADERBOARD SYSTEM ======
        function generateLeaderboards() {
            // This would typically fetch from a server
            // For now, we'll simulate data
            simulateLeaderboardData();
            updateLeaderboardTable('global');
        }

        function simulateLeaderboardData() {
            const playerNames = [
                "BizMaster", "CryptoKing", "StockGuru", "BusinessTycoon", "MoneyMagnet",
                "WealthWizard", "TradeMaster", "InvestorPro", "MarketMogul", "FinanceElite",
                "ProfitPrince", "RevenueRuler", "CapitalCaptain", "AssetAce", "FortuneFinder"
            ];
            
            ['global', 'friends', 'weekly', 'crypto', 'business'].forEach(board => {
                LEADERBOARD_DATA[board] = [];
                for (let i = 0; i < 15; i++) {
                    const score = 1000000 - (i * 50000) + Math.floor(Math.random() * 100000);
                    const netWorth = score * 10 + Math.floor(Math.random() * 1000000);
                    const level = 10 + i + Math.floor(Math.random() * 10);
                    
                    LEADERBOARD_DATA[board].push({
                        rank: i + 1,
                        name: playerNames[i] || `Player${i+1}`,
                        score: score,
                        netWorth: netWorth,
                        level: level,
                        businessName: `${playerNames[i] || `Player${i+1}`} Inc.`
                    });
                }
            });
            
            // Add current player to global leaderboard
            const playerScore = Math.floor(gameState.totalEarnings / 10) + gameState.experience;
            const playerNetWorth = gameState.bizzy + 
                Object.entries(gameState.crypto).reduce((sum, [key, value]) => 
                    sum + (value * (gameState.cryptoValues[key] || 0)), 0);
            
            LEADERBOARD_DATA.global.push({
                rank: 42,
                name: gameState.playerName,
                score: playerScore,
                netWorth: playerNetWorth,
                level: gameState.businessLevel,
                businessName: "My Business Inc."
            });
            
            // Sort by score
            LEADERBOARD_DATA.global.sort((a, b) => b.score - a.score);
            
            // Update ranks
            LEADERBOARD_DATA.global.forEach((player, index) => {
                player.rank = index + 1;
                if (player.name === gameState.playerName) {
                    gameState.leaderboardRank = player.rank;
                    gameState.leaderboardScore = player.score;
                }
            });
        }

        function updateLeaderboardTable(leaderboardId) {
            const players = LEADERBOARD_DATA[leaderboardId] || [];
            const tbody = document.getElementById('leaderboard-body');
            tbody.innerHTML = '';
            
            players.slice(0, 10).forEach(player => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="leaderboard-rank rank-${player.rank}">#${player.rank}</td>
                    <td>
                        <div class="player-info">
                            <div class="player-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div>
                                <div style="font-weight: bold;">${player.name}</div>
                                <div style="color: #bdc3c7; font-size: 0.8rem;">${player.businessName}</div>
                            </div>
                        </div>
                    </td>
                    <td style="font-weight: bold; color: #f39c12;">${formatNumber(player.score)}</td>
                    <td style="font-weight: bold; color: #2ecc71;">$${formatNumber(player.netWorth)}</td>
                    <td>
                        <div style="background: rgba(52, 152, 219, 0.2); padding: 5px 10px; border-radius: 20px; display: inline-block;">
                            ${player.level}
                        </div>
                    </td>
                `;
                
                if (player.name === gameState.playerName) {
                    row.style.background = 'rgba(52, 152, 219, 0.1)';
                }
                
                tbody.appendChild(row);
            });
            
            // Update player's rank display
            const playerData = players.find(p => p.name === gameState.playerName);
            if (playerData) {
                document.getElementById('my-player-name').textContent = playerData.name;
                document.getElementById('my-business-name').textContent = playerData.businessName;
                document.getElementById('my-rank').textContent = `#${playerData.rank}`;
                document.getElementById('my-score').textContent = formatNumber(playerData.score);
            }
        }

        function refreshLeaderboards() {
            simulateLeaderboardData();
            const activeTab = document.querySelector('.leaderboard-tab.active');
            if (activeTab) {
                updateLeaderboardTable(activeTab.getAttribute('data-leaderboard'));
            }
            addEvent("Leaderboards refreshed!", "info");
        }

        // ====== LEVELING SYSTEM ======
        function checkLevelUp() {
            while (gameState.experience >= gameState.experienceToNextLevel) {
                gameState.experience -= gameState.experienceToNextLevel;
                gameState.businessLevel++;
                gameState.experienceToNextLevel = Math.round(gameState.experienceToNextLevel * 1.5);
                
                // Level up rewards
                const levelBonus = gameState.businessLevel * 1000;
                gameState.bizzy += levelBonus;
                
                // Add event
                addEvent(`Business Level Up! Reached level ${gameState.businessLevel}. Bonus: $${formatNumber(levelBonus)}`, "success");
                
                // Check career level (every 5 business levels)
                if (gameState.businessLevel % 5 === 0) {
                    gameState.careerLevel++;
                    addEvent(`Career Level Up! Reached level ${gameState.careerLevel}.`, "success");
                }
            }
            
            updateLevelingUI();
        }

        function updateLevelingUI() {
            const progressPercent = (gameState.experience / gameState.experienceToNextLevel) * 100;
            
            document.getElementById('business-level-display').textContent = gameState.businessLevel;
            document.getElementById('prestige-level').textContent = gameState.prestigeLevel;
            document.getElementById('current-xp').textContent = formatNumber(gameState.experience);
            document.getElementById('xp-needed').textContent = formatNumber(gameState.experienceToNextLevel);
            document.getElementById('business-level-progress').style.width = `${progressPercent}%`;
            
            document.getElementById('career-level').textContent = gameState.careerLevel;
            document.getElementById('total-experience').textContent = formatNumber(gameState.experience);
            document.getElementById('next-level-xp').textContent = formatNumber(gameState.experienceToNextLevel);
            document.getElementById('career-progress').style.width = `${progressPercent}%`;
            
            // Update level bonus based on level
            const levelBonus = gameState.businessLevel * 2.5;
            document.getElementById('level-bonus').textContent = `${levelBonus}%`;
        }

        function prestigeReset() {
            if (gameState.businessLevel < 50) {
                alert("You need to reach Business Level 50 to prestige!");
                return;
            }
            
            if (!confirm("Prestige will reset your business level and some progress, but give you permanent bonuses. Continue?")) {
                return;
            }
            
            // Prestige rewards
            gameState.prestigeLevel++;
            gameState.businessLevel = 1;
            gameState.experience = 0;
            gameState.experienceToNextLevel = 1000;
            
            // Prestige bonus (permanent)
            const prestigeBonus = gameState.prestigeLevel * 0.1; // 10% per prestige
            
            // Add event
            addEvent(`Prestiged! Reached Prestige Level ${gameState.prestigeLevel}.`, "success");
            
            updateLevelingUI();
        }

        // ====== UTILITY FUNCTIONS ======
        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(2) + 'M';
            }
            if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num.toFixed(2);
        }

        function addEvent(message, type = "info") {
            const event = {
                message,
                type,
                timestamp: new Date().toLocaleTimeString()
            };
            
            gameState.eventLog.unshift(event);
            
            // Keep only last 10 events
            if (gameState.eventLog.length > 10) {
                gameState.eventLog.pop();
            }
            
            updateEventLog();
        }

        function updateEventLog() {
            const container = document.getElementById('event-log-list');
            container.innerHTML = '';
            
            gameState.eventLog.forEach(event => {
                const eventEl = document.createElement('div');
                eventEl.className = 'event-item';
                eventEl.style.borderLeftColor = 
                    event.type === 'success' ? '#2ecc71' : 
                    event.type === 'error' ? '#e74c3c' : 
                    event.type === 'warning' ? '#f39c12' : '#3498db';
                
                eventEl.innerHTML = `
                    <div class="event-message">${event.message}</div>
                    <div class="event-time">${event.timestamp}</div>
                `;
                
                container.appendChild(eventEl);
            });
        }

        function updateUI() {
            // Update currency displays
            document.getElementById('bizzy-amount').textContent = formatNumber(gameState.bizzy);
            document.getElementById('bitcoin-amount').textContent = gameState.crypto.bitcoin.toFixed(4);
            document.getElementById('ethereum-amount').textContent = gameState.crypto.ethereum.toFixed(2);
            document.getElementById('reputation-amount').textContent = gameState.reputation;
            
            // Update stats
            document.getElementById('player-job').textContent = gameState.job ? gameState.job.title : 'Unemployed';
            document.getElementById('businesses-owned').textContent = gameState.businesses.length;
            document.getElementById('coding-skill').textContent = `Lv. ${gameState.codingSkill}`;
            
            // Calculate net worth
            let netWorth = gameState.bizzy;
            Object.entries(gameState.crypto).forEach(([key, value]) => {
                netWorth += value * (gameState.cryptoValues[key] || 0);
            });
            gameState.businesses.forEach(business => {
                netWorth += business.dailyRevenue * 30; // Estimate 30 days revenue
            });
            
            document.getElementById('net-worth').textContent = formatNumber(netWorth);
            
            // Update jobs completed
            const jobsCompleted = gameState.job ? 1 : 0; // Simplified
            document.getElementById('jobs-completed').textContent = jobsCompleted;
            
            // Update crypto portfolio
            updateCryptoPortfolio();
        }

        function startGameTimer() {
            // Game timer for day progression
            setInterval(() => {
                // This would update business revenues, pay salaries, etc.
                updateBusinessRevenues();
            }, 60000); // Every minute
        }

        function updateBusinessRevenues() {
            // Collect revenue from businesses
            gameState.businesses.forEach(business => {
                gameState.bizzy += business.dailyRevenue / 24; // Hourly revenue
                gameState.experience += 10;
            });
            
            // Pay job salary
            if (gameState.job) {
                gameState.bizzy += gameState.job.dailySalary / 24; // Hourly salary
                gameState.experience += 5;
            }
            
            checkLevelUp();
            updateUI();
        }

        function saveGame() {
            try {
                localStorage.setItem('bizEmpireSave', JSON.stringify(gameState));
                addEvent("Game saved successfully.", "info");
                return true;
            } catch (error) {
                console.error('Save error:', error);
                addEvent("Failed to save game!", "error");
                return false;
            }
        }

        function loadGame() {
            try {
                const savedData = localStorage.getItem('bizEmpireSave');
                if (!savedData) {
                    addEvent("New game started!", "info");
                    return false;
                }
                
                const parsedData = JSON.parse(savedData);
                Object.assign(gameState, parsedData);
                
                addEvent("Game loaded successfully.", "success");
                return true;
            } catch (error) {
                console.error('Load error:', error);
                addEvent("Failed to load game!", "error");
                return false;
            }
        }

        // ====== QUICK ACTIONS ======
        function quickSave() {
            if (saveGame()) {
                alert("Game saved successfully!");
            }
        }

        function takeLoan() {
            const loanAmount = 10000;
            const interest = 0.2; // 20% interest
            
            if (confirm(`Take a loan of $${formatNumber(loanAmount)}?\nYou'll need to repay $${formatNumber(loanAmount * (1 + interest))} in 7 days.`)) {
                gameState.bizzy += loanAmount;
                addEvent(`Took a loan of $${formatNumber(loanAmount)}`, "warning");
                updateUI();
            }
        }

        function hireEmployee() {
            const cost = 5000;
            if (gameState.bizzy >= cost) {
                gameState.bizzy -= cost;
                gameState.employees.push({
                    id: Date.now(),
                    name: `Employee ${gameState.employees.length + 1}`,
                    salary: 500,
                    productivity: 1.0
                });
                addEvent(`Hired a new employee!`, "success");
                updateUI();
            } else {
                alert(`You need $${formatNumber(cost)} to hire an employee!`);
            }
        }

        function showUpgrades() {
            alert("Upgrades feature coming soon!");
        }

        // ====== MISC FUNCTIONS ======
        function showJobInfo() {
            alert("Higher level jobs pay more but require more experience. Complete jobs to level up!");
        }

        function showCryptoAnalysis() {
            alert("Crypto market analysis: Prices are volatile. Buy low, sell high!");
        }

        function showGamblingRules() {
            alert("Gambling Rules:\n1. You must be 18+ to play\n2. Play responsibly\n3. Never gamble more than you can afford to lose");
        }

        function showMyRank() {
            alert(`Your Global Rank: #${gameState.leaderboardRank}\nYour Score: ${formatNumber(gameState.leaderboardScore)}`);
        }

        function showLevelRewards() {
            alert("Level Rewards:\n- Every level: Bonus Bizzy\n- Every 5 levels: Career level up\n- Level 50: Prestige unlock");
        }

        // ====== INITIALIZE GAME ======
        window.addEventListener('load', initializeGame);
        
        // Auto-save every 30 seconds
        setInterval(() => {
            if (gameState.autoSave) {
                saveGame();
            }
        }, 30000);
        
        // Auto-update crypto prices every 2 minutes
        setInterval(updateCryptoPrices, 120000);
    </script>
</body>
</html>
